//script by Sophie "Shinko to Kuma". Skype: live:sophiekitsune discord: Sophie#2418 website: https://shinko-to-kuma.my-free.website/
// Updated on April 30th, adding translations and adjusting the layout a tiny bit
var _0x5edb=['match','Done\x20with\x20this\x20cycle','Distance','Total\x20clay','distance','split','header','.res.stone,.warn_90.stone,.warn.stone','Captcha\x20was\x20triggered!\x20refreshing\x20page.','\x22\x20onclick=\x22sendResource(','Average\x20is\x20higher\x20than\x20capacity,\x20reduce','.quickedit-vn','\x27\x20class=\x27sophRowB\x27','\x20id=\x27','nextElementSibling','SuccessMessage','https://v.tylercamp.me/hc/WHBalancerSophie','attr','player','Αποστολή\x20πόρων','map_send','post','error','Created\x20by\x20Sophie\x20\x27Shinko\x20to\x20Kuma\x27','href','availableMerchants','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22progressbar\x22\x20style=\x22width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#36393f;\x22><div\x20id=\x22progress\x22\x20style=\x22width:\x200%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20height:\x2035px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#4CAF50;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20line-height:\x2032px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20black;\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>','trim','#appendHere','Verstuur\x20grondstoffen','Clay','lowPoints','Bilancia\x20risorse','\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Clay:\x20','stone','Total\x20wood','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20width=\x2250\x22\x20style=\x22text-align:center\x22>','#contentContainer','iron',':button,#building','parentElement','warehouseCapacity','dataset','Σύνολο\x20σιδήρου','target','replace','\x22\x20style=\x22color:#40D0E0;\x22\x20>','#sendResources','\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Iron:\x20','url','Πηλός\x20ανα\x20χωριό','always','Argilla\x20per\x20villaggio','Totaal\x20leem','finished','<span\x20class=\x22icon\x20header\x20stone\x22>\x20</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20width=\x2250\x22\x20style=\x22text-align:center\x22>','.icon.mheader','it_IT',':button[id^=\x22building\x22]','location','Too\x20much\x20iron\x20incoming\x20in\x20','sitter','farmSpaceTotal','needsMorePercentage','length','%\x20of\x20WH\x20capacity','\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Max\x20final\x20capacity:\x20','Warenhuis\x20balancer',',\x20ironadjustement:\x20','#trades_table\x20tr','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Iron:\x20','&#10;Warehouse\x20capacity:\x20','Too\x20much\x20wood\x20incoming\x20in\x20','Reached\x20list\x20creation','points','Απόσταση','name',')\x22></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</tr>','&screen=overview_villages&mode=prod&page=-1&','prop','Ξύλο','builtOutPercentage','floor','.icon.header','Creato\x20da\x20\x20Sophie\x20\x27Shinko\x20to\x20Kuma\x27','Hout','Σύνολο\x20ξύλου','Ijzer\x20per\x20dorp','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22sophHeader\x22\x20width=\x225%\x22\x20style=\x22text-align:center\x22>','Warehouse\x20balancer','push','#3e4147','remove','a[href*=\x22market\x22]','Distanza','get',',\x20adjusting\x20what\x20we\x20leave\x20at\x20home\x20to\x20be\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22sendResources\x22\x20border=0>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<table\x20id=\x22tableSend\x22\x20width=\x22100%\x22\x20class=\x22sophHeader\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tbody\x20id=\x22appendHere\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22sophHeader\x22\x20colspan=7\x20width=“550”\x20style=\x22text-align:center\x22\x20>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','css','</td><td>','Iron\x20per\x20village','keys','farmSpaceUsed','Argilla','source','text','removed\x20empty\x20lines','Creating\x20line\x20','Afstand','mobile','Hout\x20per\x20dorp','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22sophHeader\x22\x20width=\x2210%\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<font\x20size=\x221\x22>','</font>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tbody>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</table>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','.content-border','</td></tr></table>','System','Villaggio\x20obiettivo','Δημιουργήθηκε\x20από\x20την\x20Sophie\x20\x27Shinko\x20to\x20Kuma\x27','Incoming\x20resources:\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Wood:\x20','combined\x20the\x20sendings','\x22\x20style=\x22color:#40D0E0;\x22\x20data-toggle=\x22tooltip\x22\x20title=\x22Wood\x20in\x20WH:\x20','undefined','Farm\x20almost\x20full\x20(','Iron','Source\x20village','nl_NL','highFarm','locale','Ξύλο\x20ανα\x20χωριό','\x20&#10;Clay\x20in\x20WH:\x20','disabled','-----------------------------------------------------------------------------------------','Wood\x20per\x20village','round','Σύνολο\x20πηλού','</a>\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20width=\x2250\x22\x20style=\x22text-align:center\x22>','Too\x20much\x20clay\x20incoming\x20in\x20','Target\x20village','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22sophHeader\x22\x20width=\x2210%\x22\x20style=\x22text-align:center\x22>',',\x20clayadjustement:\x20','find','<span\x20class=\x22icon\x20header\x20wood\x22>\x20</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20width=\x2250\x22\x20style=\x22text-align:center\x22>','done','</td></tr><tr><td>','Ferro','#202225','message','villageID','previousElementSibling','Total\x20iron','Gemaakt\x20door\x20Sophie\x20\x27Shinko\x20to\x20Kuma\x27','.mheader.ressources','.res.iron,.warn_90.iron,.warn.iron','sort','Leem\x20per\x20dorp','wood','game.php?t=','\x20needs\x20help\x20growing,\x20setting\x20required\x20resources\x20to\x20','999','Latest\x20update:\x2030\x20April\x202020\x20-\x20Sophie\x20\x27Shinko\x20to\x20Kuma\x27','Χωριό\x20στόχος','focus','#totals','Send\x20resources','Totaal\x20ijzer','Wood','hypot','append','Σίδερο','textContent','Ferro\x20per\x20villaggio','Argilla\x20totale','Clay\x20per\x20village','&#10;Iron\x20in\x20WH:\x20','#progress','reload','\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Wood:\x20','.res.wood,.warn_90.wood,.warn.wood','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22sophHeader\x22\x20width=\x2225%\x22\x20style=\x22text-align:center\x22>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Clay:\x20','\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Warehouse\x20capacity:\x20','class','Filled\x20up\x20the\x20sendings','Leem','Excess\x20is\x20bigger\x20than\x20current\x20available\x20resources,\x20setting\x20it\x20to\x20current\x20available','#mobileHeader','children','indexOf','innerText','desktop','Πηλός','Ijzer','prepend','Legno','.res.mwood,.warn_90.mwood,.warn.mwood','width','Grabbed\x20transport\x20page','#production_table\x20th','el_GR','log','innerHTML','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<tr\x20','fail'];(function(_0x4ef385,_0x5edb39){var _0x3bd477=function(_0x414156){while(--_0x414156){_0x4ef385['push'](_0x4ef385['shift']());}};_0x3bd477(++_0x5edb39);}(_0x5edb,0x1af));var _0x3bd4=function(_0x4ef385,_0x5edb39){_0x4ef385=_0x4ef385-0x0;var _0x3bd477=_0x5edb[_0x4ef385];return _0x3bd477;};_0x294568:console[_0x3bd4('0xb1')](_0x3bd4('0x89'));$[_0x3bd4('0xca')](_0x3bd4('0xc5'));var warehouseCapacity=[];var allWoodTotals=[];var allClayTotals=[];var allIronTotals=[];var availableMerchants=[];var totalMerchants=[];var farmSpaceUsed=[];var farmSpaceTotal=[];var villagePoints=[];var villagesData=[];var villageID=[];var allWoodObjects,allClayObjects,allIronObjects,allVillages;var totalsAndAverages='';var incomingRes={};var totalWood,totalStone,totalIron;var merchantOrders=[];var excessResources=[];var shortageResources=[];var links=[];var cleanLinks=[];var langShinko=[_0x3bd4('0x42'),_0x3bd4('0x66'),'Target\x20village',_0x3bd4('0xb7'),_0x3bd4('0x8f'),_0x3bd4('0x7'),_0x3bd4('0x65'),_0x3bd4('0x8d'),_0x3bd4('0x0'),_0x3bd4('0xc'),_0x3bd4('0xb8'),_0x3bd4('0x7f'),_0x3bd4('0x6e'),_0x3bd4('0x96'),_0x3bd4('0x4e')];if(game_data[_0x3bd4('0x69')]=='en_DK'){langShinko=[_0x3bd4('0x42'),_0x3bd4('0x66'),_0x3bd4('0x73'),_0x3bd4('0xb7'),_0x3bd4('0x8f'),_0x3bd4('0x7'),_0x3bd4('0x65'),_0x3bd4('0x8d'),_0x3bd4('0x0'),_0x3bd4('0xc'),_0x3bd4('0xb8'),_0x3bd4('0x7f'),'Wood\x20per\x20village',_0x3bd4('0x96'),_0x3bd4('0x4e')];}if(game_data[_0x3bd4('0x69')]==_0x3bd4('0xb0')){langShinko=[_0x3bd4('0x42'),'Προέλευση',_0x3bd4('0x8a'),_0x3bd4('0x34'),_0x3bd4('0x39'),_0x3bd4('0xa8'),_0x3bd4('0x92'),_0x3bd4('0xc8'),_0x3bd4('0x5f'),_0x3bd4('0x3f'),_0x3bd4('0x70'),_0x3bd4('0x14'),_0x3bd4('0x6a'),_0x3bd4('0x1b'),'Σίδερο\x20ανα\x20χωριό'];}if(game_data['locale']==_0x3bd4('0x67')){langShinko=[_0x3bd4('0x2c'),'Oorsprong','Doel',_0x3bd4('0x56'),_0x3bd4('0x3e'),_0x3bd4('0xa1'),_0x3bd4('0xa9'),_0x3bd4('0x6'),_0x3bd4('0x80'),'Totaal\x20hout',_0x3bd4('0x1e'),_0x3bd4('0x8e'),_0x3bd4('0x58'),_0x3bd4('0x84'),_0x3bd4('0x40')];}if(game_data[_0x3bd4('0x69')]==_0x3bd4('0x22')){langShinko=[_0x3bd4('0x9'),'Villaggio\x20di\x20origine',_0x3bd4('0x5e'),_0x3bd4('0x47'),_0x3bd4('0xab'),_0x3bd4('0x51'),_0x3bd4('0x7a'),'Manda\x20risorse',_0x3bd4('0x3d'),'Legno\x20totale',_0x3bd4('0x95'),'Ferro\x20totale','Legno\x20per\x20villaggio',_0x3bd4('0x1d'),_0x3bd4('0x94')];}var backgroundColor='#36393f';var borderColor=_0x3bd4('0x44');var headerColor=_0x3bd4('0x7b');var titleColor='#ffffdf';cssClassesSophie='\x0a<style>\x0a.sophRowA\x20{\x0abackground-color:\x20#32353b;\x0acolor:\x20white;\x0a}\x0a.sophRowB\x20{\x0abackground-color:\x20#36393f;\x0acolor:\x20white;\x0a}\x0a.sophHeader\x20{\x0abackground-color:\x20#202225;\x0afont-weight:\x20bold;\x0acolor:\x20white;\x0a}\x0a</style>';$(_0x3bd4('0xe'))['eq'](0x0)[_0x3bd4('0xaa')](cssClassesSophie);$('#mobileHeader')['eq'](0x0)['prepend'](cssClassesSophie);if(typeof settings==_0x3bd4('0x63')){var settings={'highFarm':0x59d8,'lowPoints':0xbb8,'builtOutPercentage':0.25,'needsMorePercentage':0.85};}if($(_0x3bd4('0x18'))[0x0]){$(_0x3bd4('0x18'))[0x0][_0x3bd4('0x45')]();$(_0x3bd4('0x8c'))[0x0][_0x3bd4('0x45')]();}if(game_data[_0x3bd4('0xc7')][_0x3bd4('0x26')]>0x0){URLIncRes=_0x3bd4('0x86')+game_data[_0x3bd4('0xc7')]['id']+'&screen=overview_villages&mode=trader&type=inc&page=-1&type=inc';URLProd=_0x3bd4('0x86')+game_data[_0x3bd4('0xc7')]['id']+_0x3bd4('0x37');}else{URLIncRes='game.php?&screen=overview_villages&mode=trader&type=inc&page=-1&type=inc';URLProd='game.php?&screen=overview_villages&mode=prod&page=-1&';}function sendResource(_0x569c9d,_0x54a267,_0x46e580,_0x613a,_0x112a96,_0x2633f6){if($('#recaptcha-anchor-label')[_0x3bd4('0x29')]>0x0){alert(_0x3bd4('0xbd'));window[_0x3bd4('0x24')][_0x3bd4('0x99')]();}$(_0x3bd4('0x23'))['prop']('disabled',!![]);setTimeout(function(){$('#'+_0x2633f6)[0x0][_0x3bd4('0x45')]();$(_0x3bd4('0x23'))[_0x3bd4('0x38')](_0x3bd4('0x6c'),![]);$(_0x3bd4('0x10'))[0x0]['focus']();},0xc8);var _0x488cc8={'target_id':_0x54a267,'wood':_0x46e580,'stone':_0x613a,'iron':_0x112a96};TribalWars[_0x3bd4('0xca')]('market',{'ajaxaction':_0x3bd4('0xc9'),'village':_0x569c9d},_0x488cc8,function(_0x207f5e){UI[_0x3bd4('0xc4')](_0x207f5e[_0x3bd4('0x7c')]);console[_0x3bd4('0xb1')](_0x207f5e[_0x3bd4('0x7c')]);},!0x1);}$[_0x3bd4('0x48')](URLIncRes,function(){console[_0x3bd4('0xb1')](_0x3bd4('0xae'));})[_0x3bd4('0x78')](function(_0x39e4cd){var _0x561087=$(_0x39e4cd);for(var _0x54cd35=0x1;_0x54cd35<_0x561087[_0x3bd4('0x76')]('#trades_table\x20tr')['length']-0x1;_0x54cd35++){var _0x389a0b={};var _0x5c9cbd;if($(_0x3bd4('0xa3'))[0x0]){console['log']('mobile');var _0x197d9f=_0x561087[_0x3bd4('0x76')]('#trades_table\x20tr')[_0x54cd35][_0x3bd4('0xa4')][0x5][_0x3bd4('0xa4')][0x1]['children'];for(var _0x20c9e6=0x0;_0x20c9e6<Object[_0x3bd4('0x4f')](_0x197d9f)[_0x3bd4('0x29')];_0x20c9e6++){if(_0x561087['find'](_0x3bd4('0x2e'))[0x1]['children'][0x2][_0x3bd4('0xa6')]!='System'){var _0x2df9d9=$(_0x197d9f[_0x20c9e6]);var _0x363a4c=_0x2df9d9['find'](_0x3bd4('0x21'))[_0x3bd4('0xc6')](_0x3bd4('0x9f'))[_0x3bd4('0xba')]('\x20');var _0x148081=_0x363a4c[_0x363a4c[_0x3bd4('0x29')]-0x1];var _0x9dc414=_0x2df9d9[_0x3bd4('0x53')]()[_0x3bd4('0x16')](/[^\d]/g,'');_0x389a0b[_0x148081]=_0x9dc414;_0x5c9cbd=_0x561087[_0x3bd4('0x76')](_0x3bd4('0x2e'))[_0x54cd35][_0x3bd4('0xa4')][0x3][_0x3bd4('0xa4')][0x2]['href'][_0x3bd4('0xb5')](/id=(\d*)/)[0x1];}}}else{console[_0x3bd4('0xb1')](_0x3bd4('0xa7'));var _0x197d9f=_0x561087[_0x3bd4('0x76')](_0x3bd4('0x2e'))[_0x54cd35][_0x3bd4('0xa4')][0x8][_0x3bd4('0xa4')];console[_0x3bd4('0xb1')](Object['keys'](_0x197d9f)[_0x3bd4('0x29')]);for(var _0x20c9e6=0x0;_0x20c9e6<Object['keys'](_0x197d9f)[_0x3bd4('0x29')];_0x20c9e6++){var _0x2df9d9=$(_0x197d9f[_0x20c9e6]);if(_0x2df9d9[0x0][_0x3bd4('0xb2')][_0x3bd4('0xa5')](_0x3bd4('0xbb'))>-0x1){var _0x363a4c=_0x2df9d9[_0x3bd4('0x76')](_0x3bd4('0x3c'))[_0x3bd4('0xc6')](_0x3bd4('0x9f'))[_0x3bd4('0xba')]('\x20');}else{var _0x363a4c=_0x2df9d9[_0x3bd4('0xc6')](_0x3bd4('0x9f'))[_0x3bd4('0xba')]('\x20');}if(_0x561087['find'](_0x3bd4('0x2e'))[0x1][_0x3bd4('0xa4')][0x3][_0x3bd4('0xa6')]!='Premium\x20Exchange'){var _0x148081=_0x363a4c[_0x363a4c[_0x3bd4('0x29')]-0x1];console['log'](_0x148081);var _0x9dc414=_0x2df9d9[_0x3bd4('0x53')]()['replace'](/[^\d]/g,'');console[_0x3bd4('0xb1')](_0x9dc414);_0x389a0b[_0x148081]=_0x9dc414;_0x5c9cbd=_0x561087[_0x3bd4('0x76')]('#trades_table\x20tr')[_0x54cd35][_0x3bd4('0xa4')][0x4][_0x3bd4('0xa4')][0x0]['href'][_0x3bd4('0xb5')](/id=(\d*)/)[0x1];}}}if(_0x561087[_0x3bd4('0x76')](_0x3bd4('0x2e'))[0x1][_0x3bd4('0xa4')][0x3][_0x3bd4('0xa6')]!='Premium\x20Exchange'&&_0x561087[_0x3bd4('0x76')](_0x3bd4('0x2e'))[0x1][_0x3bd4('0xa4')][0x2][_0x3bd4('0xa6')]!=_0x3bd4('0x5d')){if(incomingRes[_0x5c9cbd]==undefined){incomingRes[_0x5c9cbd]={'wood':0x0,'stone':0x0,'iron':0x0};}if(_0x389a0b[_0x3bd4('0x85')]!=undefined){incomingRes[_0x5c9cbd][_0x3bd4('0x85')]+=parseInt(_0x389a0b[_0x3bd4('0x85')]);}if(_0x389a0b['stone']!=undefined){incomingRes[_0x5c9cbd][_0x3bd4('0xb')]+=parseInt(_0x389a0b[_0x3bd4('0xb')]);}if(_0x389a0b[_0x3bd4('0xf')]!=undefined){incomingRes[_0x5c9cbd][_0x3bd4('0xf')]+=parseInt(_0x389a0b[_0x3bd4('0xf')]);}}}$[_0x3bd4('0x48')](URLProd,function(){console['log']('Managed\x20to\x20grab\x20the\x20page');})[_0x3bd4('0x78')](function(_0x20bbf7){if($(_0x3bd4('0xa3'))[0x0]){console['log'](_0x3bd4('0x57'));allWoodObjects=$(_0x20bbf7)['find'](_0x3bd4('0xac'));allClayObjects=$(_0x20bbf7)[_0x3bd4('0x76')]('.res.mstone,.warn_90.mstone,.warn.mstone');allIronObjects=$(_0x20bbf7)[_0x3bd4('0x76')]('.res.miron,.warn_90.miron,.warn.miron');allWarehouses=$(_0x20bbf7)[_0x3bd4('0x76')](_0x3bd4('0x81'));allVillages=$(_0x20bbf7)[_0x3bd4('0x76')](_0x3bd4('0xc0'));allFarms=$(_0x20bbf7)['find']('.header.population');allMerchants=$(_0x20bbf7)[_0x3bd4('0x76')](_0x3bd4('0x46'));productionTable=$(_0x20bbf7)[_0x3bd4('0x76')](_0x3bd4('0xaf'));for(var _0x129393=0x0;_0x129393<allWoodObjects[_0x3bd4('0x29')];_0x129393++){n=allWoodObjects[_0x129393][_0x3bd4('0x93')];n=n[_0x3bd4('0x16')](/\./g,'')[_0x3bd4('0x16')](',','');allWoodTotals[_0x3bd4('0x43')](n);};for(var _0x129393=0x0;_0x129393<allClayObjects[_0x3bd4('0x29')];_0x129393++){n=allClayObjects[_0x129393][_0x3bd4('0x93')];n=n[_0x3bd4('0x16')](/\./g,'')['replace'](',','');allClayTotals[_0x3bd4('0x43')](n);};for(var _0x129393=0x0;_0x129393<allIronObjects[_0x3bd4('0x29')];_0x129393++){n=allIronObjects[_0x129393][_0x3bd4('0x93')];n=n[_0x3bd4('0x16')](/\./g,'')['replace'](',','');allIronTotals[_0x3bd4('0x43')](n);};for(var _0x129393=0x0;_0x129393<allVillages['length'];_0x129393++){warehouseCapacity[_0x3bd4('0x43')](allWarehouses[_0x129393]['parentElement'][_0x3bd4('0xa6')]);};for(var _0x129393=0x0;_0x129393<allVillages['length'];_0x129393++){for(var _0x4708c1=0x1;_0x4708c1<allMerchants[_0x3bd4('0x29')];_0x4708c1++){availableMerchants[_0x3bd4('0x43')](allMerchants[_0x4708c1]['innerText']);}totalMerchants[_0x3bd4('0x43')](_0x3bd4('0x88'));};for(var _0x129393=0x0;_0x129393<allVillages[_0x3bd4('0x29')];_0x129393++){farmSpaceUsed['push'](allFarms[_0x129393]['parentElement'][_0x3bd4('0xa6')][_0x3bd4('0xb5')](/(\d*)\/(\d*)/)[0x1]);farmSpaceTotal[_0x3bd4('0x43')](allFarms[_0x129393][_0x3bd4('0x11')]['innerText'][_0x3bd4('0xb5')](/(\d*)\/(\d*)/)[0x2]);};for(var _0x129393=0x0;_0x129393<allVillages[_0x3bd4('0x29')];_0x129393++){console[_0x3bd4('0xb1')](_0x129393*0x2+0x1);villagePoints[_0x3bd4('0x43')](productionTable[_0x129393*0x2+0x1][_0x3bd4('0xa6')]['replace'](/\./g,'')[_0x3bd4('0x16')](',',''));}}else{console[_0x3bd4('0xb1')]('desktop');allWoodObjects=$(_0x20bbf7)[_0x3bd4('0x76')](_0x3bd4('0x9b'));allClayObjects=$(_0x20bbf7)[_0x3bd4('0x76')](_0x3bd4('0xbc'));allIronObjects=$(_0x20bbf7)[_0x3bd4('0x76')](_0x3bd4('0x82'));allVillages=$(_0x20bbf7)[_0x3bd4('0x76')](_0x3bd4('0xc0'));for(var _0x129393=0x0;_0x129393<allWoodObjects[_0x3bd4('0x29')];_0x129393++){n=allWoodObjects[_0x129393]['textContent'];n=n[_0x3bd4('0x16')](/\./g,'')[_0x3bd4('0x16')](',','');allWoodTotals[_0x3bd4('0x43')](n);};for(var _0x129393=0x0;_0x129393<allClayObjects[_0x3bd4('0x29')];_0x129393++){n=allClayObjects[_0x129393][_0x3bd4('0x93')];n=n['replace'](/\./g,'')['replace'](',','');allClayTotals[_0x3bd4('0x43')](n);};for(var _0x129393=0x0;_0x129393<allIronObjects['length'];_0x129393++){n=allIronObjects[_0x129393][_0x3bd4('0x93')];n=n['replace'](/\./g,'')[_0x3bd4('0x16')](',','');allIronTotals[_0x3bd4('0x43')](n);};for(var _0x129393=0x0;_0x129393<allVillages[_0x3bd4('0x29')];_0x129393++){warehouseCapacity[_0x3bd4('0x43')](allIronObjects[_0x129393][_0x3bd4('0x11')][_0x3bd4('0xc3')]['innerHTML']);};for(var _0x129393=0x0;_0x129393<allVillages[_0x3bd4('0x29')];_0x129393++){availableMerchants[_0x3bd4('0x43')](allIronObjects[_0x129393][_0x3bd4('0x11')][_0x3bd4('0xc3')][_0x3bd4('0xc3')][_0x3bd4('0xa6')][_0x3bd4('0xb5')](/(\d*)\/(\d*)/)[0x1]);totalMerchants[_0x3bd4('0x43')](allIronObjects[_0x129393][_0x3bd4('0x11')][_0x3bd4('0xc3')][_0x3bd4('0xc3')]['innerText'][_0x3bd4('0xb5')](/(\d*)\/(\d*)/)[0x2]);};for(var _0x129393=0x0;_0x129393<allVillages[_0x3bd4('0x29')];_0x129393++){farmSpaceUsed[_0x3bd4('0x43')](allIronObjects[_0x129393][_0x3bd4('0x11')]['nextElementSibling'][_0x3bd4('0xc3')][_0x3bd4('0xc3')]['innerText']['match'](/(\d*)\/(\d*)/)[0x1]);farmSpaceTotal[_0x3bd4('0x43')](allIronObjects[_0x129393][_0x3bd4('0x11')][_0x3bd4('0xc3')][_0x3bd4('0xc3')][_0x3bd4('0xc3')][_0x3bd4('0xa6')][_0x3bd4('0xb5')](/(\d*)\/(\d*)/)[0x2]);};for(var _0x129393=0x0;_0x129393<allVillages[_0x3bd4('0x29')];_0x129393++){villagePoints[_0x3bd4('0x43')](allWoodObjects[_0x129393][_0x3bd4('0x11')][_0x3bd4('0x7e')][_0x3bd4('0xa6')][_0x3bd4('0x16')](/\./g,'')[_0x3bd4('0x16')](',',''));}}for(var _0x129393=0x0;_0x129393<allVillages[_0x3bd4('0x29')];_0x129393++){villagesData[_0x3bd4('0x43')]({'id':allVillages[_0x129393][_0x3bd4('0x13')]['id'],'points':villagePoints[_0x129393],'url':allVillages[_0x129393]['children'][0x0][_0x3bd4('0xa4')][0x0][_0x3bd4('0x1')],'name':allVillages[_0x129393][_0x3bd4('0xa6')][_0x3bd4('0x4')](),'wood':allWoodTotals[_0x129393],'stone':allClayTotals[_0x129393],'iron':allIronTotals[_0x129393],'availableMerchants':availableMerchants[_0x129393],'totalMerchants':totalMerchants[_0x129393],'warehouseCapacity':warehouseCapacity[_0x129393],'farmSpaceUsed':farmSpaceUsed[_0x129393],'farmSpaceTotal':farmSpaceTotal[_0x129393]});};villagesData[_0x3bd4('0x83')]((_0x3e4ec7,_0x2418aa)=>parseInt(_0x3e4ec7[_0x3bd4('0x33')])<parseInt(_0x2418aa[_0x3bd4('0x33')])?0x1:-0x1);totalWood=0x0;totalStone=0x0;totalIron=0x0;for(var _0x129393 in allWoodTotals){totalWood+=parseInt(allWoodTotals[_0x129393]);}for(var _0x129393 in allClayTotals){totalStone+=parseInt(allClayTotals[_0x129393]);}for(var _0x129393 in allIronTotals){totalIron+=parseInt(allIronTotals[_0x129393]);}for(var _0x18a81b=0x0;_0x18a81b<Object['keys'](incomingRes)[_0x3bd4('0x29')];_0x18a81b++){totalWood+=incomingRes[Object[_0x3bd4('0x4f')](incomingRes)[_0x18a81b]][_0x3bd4('0x85')];totalStone+=incomingRes[Object['keys'](incomingRes)[_0x18a81b]][_0x3bd4('0xb')];totalIron+=incomingRes[Object[_0x3bd4('0x4f')](incomingRes)[_0x18a81b]][_0x3bd4('0xf')];}woodAverage=Math[_0x3bd4('0x3b')](totalWood/warehouseCapacity[_0x3bd4('0x29')]);stoneAverage=Math[_0x3bd4('0x3b')](totalStone/warehouseCapacity[_0x3bd4('0x29')]);ironAverage=Math[_0x3bd4('0x3b')](totalIron/warehouseCapacity[_0x3bd4('0x29')]);totalsAndAverages='<div\x20id=\x27totals\x27\x20class=\x27vis\x27\x20border=0><table\x20id=\x27totalsAndAverages\x27\x20width=\x27100%\x27><tr><td>'+langShinko[0x9]+':\x20'+totalWood+_0x3bd4('0x4d')+langShinko[0xa]+':\x20'+totalStone+_0x3bd4('0x4d')+langShinko[0xb]+':\x20'+totalIron+_0x3bd4('0x79')+langShinko[0xc]+':\x20'+woodAverage+_0x3bd4('0x4d')+langShinko[0xd]+':\x20'+stoneAverage+_0x3bd4('0x4d')+langShinko[0xe]+':\x20'+ironAverage+_0x3bd4('0x5c');$(_0x3bd4('0x5b'))['eq'](0x0)[_0x3bd4('0xaa')]('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22progressbar\x22\x20style=\x22width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#36393f;\x22><div\x20id=\x22progress\x22\x20style=\x22width:\x200%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20height:\x2035px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#4CAF50;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20line-height:\x2032px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20black;\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>');$(_0x3bd4('0xa3'))['eq'](0x0)['prepend'](_0x3bd4('0x3'));for(var _0x5ee1ab=0x0;_0x5ee1ab<villagesData[_0x3bd4('0x29')];_0x5ee1ab++){console[_0x3bd4('0xb1')](_0x3bd4('0x6d'));excessResources[_0x5ee1ab]=[];shortageResources[_0x5ee1ab]=[];villageID[_0x3bd4('0x43')](villagesData[_0x5ee1ab]['id']);if(typeof incomingRes[villagesData[_0x5ee1ab]['id']]==_0x3bd4('0x63')){incomingWood=0x0;incomingStone=0x0;incomingIron=0x0;}else{incomingWood=incomingRes[villagesData[_0x5ee1ab]['id']][_0x3bd4('0x85')];incomingStone=incomingRes[villagesData[_0x5ee1ab]['id']][_0x3bd4('0xb')];incomingIron=incomingRes[villagesData[_0x5ee1ab]['id']][_0x3bd4('0xf')];}console[_0x3bd4('0xb1')](_0x3bd4('0x60')+incomingWood+_0x3bd4('0x9d')+incomingStone+_0x3bd4('0x2f')+incomingIron);if(woodAverage<villagesData[_0x5ee1ab][_0x3bd4('0x12')]*settings[_0x3bd4('0x28')]){tempWood=parseInt(villagesData[_0x5ee1ab][_0x3bd4('0x85')])+incomingWood-woodAverage;}else{console[_0x3bd4('0xb1')]('Average\x20is\x20higher\x20than\x20capacity,\x20reduce');tempWood=-Math[_0x3bd4('0x6f')](villagesData[_0x5ee1ab]['warehouseCapacity']*settings['needsMorePercentage']-incomingWood-parseInt(villagesData[_0x5ee1ab][_0x3bd4('0x85')]));}if(stoneAverage<villagesData[_0x5ee1ab]['warehouseCapacity']*settings[_0x3bd4('0x28')]){tempStone=parseInt(villagesData[_0x5ee1ab][_0x3bd4('0xb')])+incomingStone-stoneAverage;}else{console[_0x3bd4('0xb1')](_0x3bd4('0xbf'));tempStone=-Math[_0x3bd4('0x6f')](villagesData[_0x5ee1ab][_0x3bd4('0x12')]*settings[_0x3bd4('0x28')]-incomingStone-parseInt(villagesData[_0x5ee1ab][_0x3bd4('0xb')]));}if(ironAverage<villagesData[_0x5ee1ab][_0x3bd4('0x12')]*settings[_0x3bd4('0x28')]){tempIron=parseInt(villagesData[_0x5ee1ab][_0x3bd4('0xf')])+incomingIron-ironAverage;}else{console[_0x3bd4('0xb1')](_0x3bd4('0xbf'));tempIron=-Math['round'](villagesData[_0x5ee1ab]['warehouseCapacity']*settings['needsMorePercentage']-incomingIron-parseInt(villagesData[_0x5ee1ab][_0x3bd4('0xf')]));}console[_0x3bd4('0xb1')](tempWood);console['log'](tempStone);console['log'](tempIron);if(villagesData[_0x5ee1ab][_0x3bd4('0x50')]>settings[_0x3bd4('0x68')]){console[_0x3bd4('0xb1')](_0x3bd4('0x64')+villagesData[_0x5ee1ab][_0x3bd4('0x50')]+'/'+villagesData[_0x5ee1ab][_0x3bd4('0x27')]+')\x20in\x20'+villagesData[_0x5ee1ab]['name']+_0x3bd4('0x49')+0x64*settings[_0x3bd4('0x3a')]+'%');if(parseInt(villagesData[_0x5ee1ab][_0x3bd4('0x85')])+incomingWood>settings[_0x3bd4('0x3a')]*villagesData[_0x5ee1ab][_0x3bd4('0x12')]){tempWood=Math[_0x3bd4('0x6f')](parseInt(villagesData[_0x5ee1ab]['wood'])+incomingWood-settings[_0x3bd4('0x3a')]*villagesData[_0x5ee1ab][_0x3bd4('0x12')]);}if(parseInt(villagesData[_0x5ee1ab][_0x3bd4('0xb')])+incomingStone>settings[_0x3bd4('0x3a')]*villagesData[_0x5ee1ab][_0x3bd4('0x12')]){tempStone=Math[_0x3bd4('0x6f')](parseInt(villagesData[_0x5ee1ab][_0x3bd4('0xb')])+incomingStone-settings[_0x3bd4('0x3a')]*villagesData[_0x5ee1ab][_0x3bd4('0x12')]);}if(parseInt(villagesData[_0x5ee1ab][_0x3bd4('0xf')])+incomingIron>settings[_0x3bd4('0x3a')]*villagesData[_0x5ee1ab][_0x3bd4('0x12')]){tempIron=Math[_0x3bd4('0x6f')](parseInt(villagesData[_0x5ee1ab][_0x3bd4('0xf')])+incomingIron-settings[_0x3bd4('0x3a')]*villagesData[_0x5ee1ab][_0x3bd4('0x12')]);}}if(villagesData[_0x5ee1ab][_0x3bd4('0x33')]<settings[_0x3bd4('0x8')]){console[_0x3bd4('0xb1')](villagesData[_0x5ee1ab]['name']+'\x20('+villagesData[_0x5ee1ab][_0x3bd4('0x33')]+')'+_0x3bd4('0x87')+settings[_0x3bd4('0x28')]*0x64+_0x3bd4('0x2a'));tempWood=-Math[_0x3bd4('0x6f')](villagesData[_0x5ee1ab][_0x3bd4('0x12')]*settings['needsMorePercentage']-parseInt(villagesData[_0x5ee1ab]['wood'])-incomingWood);tempStone=-Math[_0x3bd4('0x6f')](villagesData[_0x5ee1ab][_0x3bd4('0x12')]*settings['needsMorePercentage']-parseInt(villagesData[_0x5ee1ab][_0x3bd4('0xb')])-incomingStone);tempIron=-Math[_0x3bd4('0x6f')](villagesData[_0x5ee1ab]['warehouseCapacity']*settings[_0x3bd4('0x28')]-parseInt(villagesData[_0x5ee1ab][_0x3bd4('0xf')])-incomingIron);}if(incomingWood+parseInt(villagesData[_0x5ee1ab][_0x3bd4('0x85')])>villagesData[_0x5ee1ab][_0x3bd4('0x12')]){console[_0x3bd4('0xb1')](_0x3bd4('0x31')+villagesData[_0x5ee1ab][_0x3bd4('0x35')]);tempWood=-Math[_0x3bd4('0x6f')](villagesData[_0x5ee1ab][_0x3bd4('0x12')]*settings[_0x3bd4('0x28')]-incomingWood-parseInt(villagesData[_0x5ee1ab][_0x3bd4('0x85')]));}if(incomingStone+parseInt(villagesData[_0x5ee1ab][_0x3bd4('0xb')])>villagesData[_0x5ee1ab][_0x3bd4('0x12')]){console[_0x3bd4('0xb1')](_0x3bd4('0x72')+villagesData[_0x5ee1ab]['name']);tempStone=-Math['round'](villagesData[_0x5ee1ab][_0x3bd4('0x12')]*settings['needsMorePercentage']-incomingStone-parseInt(villagesData[_0x5ee1ab]['stone']));}if(incomingIron+parseInt(villagesData[_0x5ee1ab]['iron'])>villagesData[_0x5ee1ab][_0x3bd4('0x12')]){console[_0x3bd4('0xb1')](_0x3bd4('0x25')+villagesData[_0x5ee1ab][_0x3bd4('0x35')]);tempIron=-Math['round'](villagesData[_0x5ee1ab][_0x3bd4('0x12')]*settings[_0x3bd4('0x28')]-incomingIron-parseInt(villagesData[_0x5ee1ab][_0x3bd4('0xf')]));}if(tempWood>0x0&&tempWood>parseInt(villagesData[_0x5ee1ab][_0x3bd4('0x85')])){console['log'](_0x3bd4('0xa2'));tempWood=parseInt(villagesData[_0x5ee1ab][_0x3bd4('0x85')]);}if(tempStone>0x0&&tempStone>parseInt(villagesData[_0x5ee1ab][_0x3bd4('0xb')])){console[_0x3bd4('0xb1')](_0x3bd4('0xa2'));tempStone=parseInt(villagesData[_0x5ee1ab][_0x3bd4('0xb')]);}if(tempIron>0x0&&tempIron>parseInt(villagesData[_0x5ee1ab][_0x3bd4('0xf')])){console[_0x3bd4('0xb1')]('Excess\x20is\x20bigger\x20than\x20current\x20available\x20resources,\x20setting\x20it\x20to\x20current\x20available');tempIron=parseInt(villagesData[_0x5ee1ab][_0x3bd4('0xf')]);}console[_0x3bd4('0xb1')]('Village:\x20'+villagesData[_0x5ee1ab][_0x3bd4('0x35')]+'\x0a'+_0x3bd4('0x2b')+villagesData[_0x5ee1ab][_0x3bd4('0x12')]*settings[_0x3bd4('0x28')]+'\x0a'+_0x3bd4('0x9e')+villagesData[_0x5ee1ab][_0x3bd4('0x12')]+'\x0a'+_0x3bd4('0x9a')+parseInt(villagesData[_0x5ee1ab][_0x3bd4('0x85')])+'\x0a'+_0x3bd4('0xa')+parseInt(villagesData[_0x5ee1ab]['stone'])+'\x0a'+_0x3bd4('0x19')+parseInt(villagesData[_0x5ee1ab][_0x3bd4('0xf')]));console[_0x3bd4('0xb1')]('Woodadjustement:\x20'+tempWood+_0x3bd4('0x75')+tempStone+_0x3bd4('0x2d')+tempIron);if(tempWood>0x0){excessResources[_0x5ee1ab][_0x3bd4('0x43')]({'wood':Math[_0x3bd4('0x3b')](tempWood/0x3e8)*0x3e8});shortageResources[_0x5ee1ab][_0x3bd4('0x43')]({'wood':0x0});}else{shortageResources[_0x5ee1ab][_0x3bd4('0x43')]({'wood':Math[_0x3bd4('0x3b')](-tempWood/0x3e8)*0x3e8});excessResources[_0x5ee1ab][_0x3bd4('0x43')]({'wood':0x0});}if(tempStone>0x0){excessResources[_0x5ee1ab][_0x3bd4('0x43')]({'stone':Math[_0x3bd4('0x3b')](tempStone/0x3e8)*0x3e8});shortageResources[_0x5ee1ab][_0x3bd4('0x43')]({'stone':0x0});}else{shortageResources[_0x5ee1ab][_0x3bd4('0x43')]({'stone':Math[_0x3bd4('0x3b')](-tempStone/0x3e8)*0x3e8});excessResources[_0x5ee1ab]['push']({'stone':0x0});}if(tempIron>0x0){excessResources[_0x5ee1ab][_0x3bd4('0x43')]({'iron':Math[_0x3bd4('0x3b')](tempIron/0x3e8)*0x3e8});shortageResources[_0x5ee1ab]['push']({'iron':0x0});}else{shortageResources[_0x5ee1ab][_0x3bd4('0x43')]({'iron':Math['floor'](-tempIron/0x3e8)*0x3e8});excessResources[_0x5ee1ab][_0x3bd4('0x43')]({'iron':0x0});}}for(var _0xcad5f9=0x0;_0xcad5f9<excessResources['length'];_0xcad5f9++){tempAllExcessCombined=parseInt(Math[_0x3bd4('0x3b')](excessResources[_0xcad5f9][0x0][_0x3bd4('0x85')]/0x3e8)*0x3e8)+parseInt(Math[_0x3bd4('0x3b')](excessResources[_0xcad5f9][0x1][_0x3bd4('0xb')]/0x3e8)*0x3e8)+parseInt(Math[_0x3bd4('0x3b')](excessResources[_0xcad5f9][0x2][_0x3bd4('0xf')]/0x3e8)*0x3e8);if(tempAllExcessCombined>0x0){tempMaxMerchantsNeeded=Math[_0x3bd4('0x3b')](tempAllExcessCombined/0x3e8);if(tempMaxMerchantsNeeded<villagesData[_0xcad5f9][_0x3bd4('0x2')]){merchantOrders[_0x3bd4('0x43')]({'villageID':villagesData[_0xcad5f9]['id'],'x':villagesData[_0xcad5f9][_0x3bd4('0x35')]['match'](/(\d+)\|(\d+)/)[0x1],'y':villagesData[_0xcad5f9]['name'][_0x3bd4('0xb5')](/(\d+)\|(\d+)/)[0x2],'wood':Math[_0x3bd4('0x3b')](excessResources[_0xcad5f9][0x0][_0x3bd4('0x85')]/0x3e8),'stone':Math[_0x3bd4('0x3b')](excessResources[_0xcad5f9][0x1][_0x3bd4('0xb')]/0x3e8),'iron':Math[_0x3bd4('0x3b')](excessResources[_0xcad5f9][0x2][_0x3bd4('0xf')]/0x3e8)});}else{tempPercWood=excessResources[_0xcad5f9][0x0]['wood']/tempAllExcessCombined;tempPercStone=excessResources[_0xcad5f9][0x1][_0x3bd4('0xb')]/tempAllExcessCombined;tempPercIron=excessResources[_0xcad5f9][0x2][_0x3bd4('0xf')]/tempAllExcessCombined;merchantOrders[_0x3bd4('0x43')]({'villageID':villagesData[_0xcad5f9]['id'],'x':villagesData[_0xcad5f9]['name'][_0x3bd4('0xb5')](/(\d+)\|(\d+)/)[0x1],'y':villagesData[_0xcad5f9][_0x3bd4('0x35')][_0x3bd4('0xb5')](/(\d+)\|(\d+)/)[0x2],'wood':Math[_0x3bd4('0x3b')](tempPercWood*villagesData[_0xcad5f9]['availableMerchants']),'stone':Math[_0x3bd4('0x3b')](tempPercStone*villagesData[_0xcad5f9]['availableMerchants']),'iron':Math['floor'](tempPercIron*villagesData[_0xcad5f9][_0x3bd4('0x2')])});}}}for(var _0x479a7f=shortageResources[_0x3bd4('0x29')]-0x1;_0x479a7f>=0x0;_0x479a7f--){$(_0x3bd4('0x98'))[_0x3bd4('0x4c')](_0x3bd4('0xad'),(shortageResources['length']-_0x479a7f)/shortageResources[_0x3bd4('0x29')]*0x64+'%');for(var _0x1cd6bd=0x0;_0x1cd6bd<merchantOrders[_0x3bd4('0x29')];_0x1cd6bd++){merchantOrders[_0x1cd6bd][_0x3bd4('0xb9')]=checkDistance(merchantOrders[_0x1cd6bd]['x'],merchantOrders[_0x1cd6bd]['y'],villagesData[_0x479a7f][_0x3bd4('0x35')][_0x3bd4('0xb5')](/(\d+)\|(\d+)/)[0x1],villagesData[_0x479a7f][_0x3bd4('0x35')][_0x3bd4('0xb5')](/(\d+)\|(\d+)/)[0x2]);}merchantOrders[_0x3bd4('0x83')](function(_0x198f56,_0x10d9ab){return _0x198f56['distance']-_0x10d9ab[_0x3bd4('0xb9')];});if(shortageResources[_0x479a7f][0x0][_0x3bd4('0x85')]<=0x0){}else{while(shortageResources[_0x479a7f][0x0]['wood']>0x0){var _0xfe8823=0x0;for(var _0x10bf49=0x0;_0x10bf49<merchantOrders[_0x3bd4('0x29')];_0x10bf49++){_0xfe8823+=merchantOrders[_0x10bf49][_0x3bd4('0x85')];if(merchantOrders[_0x10bf49][_0x3bd4('0x85')]>0x0){if(shortageResources[_0x479a7f][0x0][_0x3bd4('0x85')]<=merchantOrders[_0x10bf49]['wood']*0x3e8){links[_0x3bd4('0x43')]({'source':merchantOrders[_0x10bf49][_0x3bd4('0x7d')],'target':villageID[_0x479a7f],'wood':shortageResources[_0x479a7f][0x0][_0x3bd4('0x85')]});merchantOrders[_0x10bf49][_0x3bd4('0x85')]-=shortageResources[_0x479a7f][0x0][_0x3bd4('0x85')]/0x3e8;shortageResources[_0x479a7f][0x0][_0x3bd4('0x85')]=0x0;}if(shortageResources[_0x479a7f][0x0][_0x3bd4('0x85')]>merchantOrders[_0x10bf49][_0x3bd4('0x85')]*0x3e8){links[_0x3bd4('0x43')]({'source':merchantOrders[_0x10bf49]['villageID'],'target':villageID[_0x479a7f],'wood':merchantOrders[_0x10bf49][_0x3bd4('0x85')]*0x3e8});shortageResources[_0x479a7f][0x0][_0x3bd4('0x85')]-=merchantOrders[_0x10bf49]['wood']*0x3e8;merchantOrders[_0x10bf49]['wood']=0x0;}}if(shortageResources[_0x479a7f][0x0][_0x3bd4('0x85')]<=0x0){break;}if(_0x10bf49==merchantOrders[_0x3bd4('0x29')]-0x1&&shortageResources[_0x479a7f][0x0][_0x3bd4('0x85')]>0x0){console[_0x3bd4('0xb1')](_0x3bd4('0xb6'));_0xfe8823=0x0;break;}}if(_0xfe8823==0x0){_0x479a7f=0x0;break;}}}}for(var _0x479a7f=shortageResources[_0x3bd4('0x29')]-0x1;_0x479a7f>=0x0;_0x479a7f--){$(_0x3bd4('0x98'))['css'](_0x3bd4('0xad'),(shortageResources['length']-_0x479a7f)/shortageResources['length']*0x64+'%');for(var _0x1cd6bd=0x0;_0x1cd6bd<merchantOrders[_0x3bd4('0x29')];_0x1cd6bd++){merchantOrders[_0x1cd6bd][_0x3bd4('0xb9')]=checkDistance(merchantOrders[_0x1cd6bd]['x'],merchantOrders[_0x1cd6bd]['y'],villagesData[_0x479a7f]['name'][_0x3bd4('0xb5')](/(\d+)\|(\d+)/)[0x1],villagesData[_0x479a7f][_0x3bd4('0x35')][_0x3bd4('0xb5')](/(\d+)\|(\d+)/)[0x2]);}merchantOrders[_0x3bd4('0x83')](function(_0x585a09,_0x3c4530){return _0x585a09[_0x3bd4('0xb9')]-_0x3c4530[_0x3bd4('0xb9')];});if(shortageResources[_0x479a7f][0x1][_0x3bd4('0xb')]<=0x0){}else{while(shortageResources[_0x479a7f][0x1][_0x3bd4('0xb')]>0x0){console[_0x3bd4('0xb1')](_0x479a7f);var _0x59dd93=0x0;for(var _0x10bf49=0x0;_0x10bf49<merchantOrders[_0x3bd4('0x29')];_0x10bf49++){_0x59dd93+=merchantOrders[_0x10bf49][_0x3bd4('0xb')];if(merchantOrders[_0x10bf49][_0x3bd4('0xb')]>0x0){if(shortageResources[_0x479a7f][0x1]['stone']<=merchantOrders[_0x10bf49][_0x3bd4('0xb')]*0x3e8){links['push']({'source':merchantOrders[_0x10bf49][_0x3bd4('0x7d')],'target':villageID[_0x479a7f],'stone':shortageResources[_0x479a7f][0x1]['stone']});merchantOrders[_0x10bf49][_0x3bd4('0xb')]-=shortageResources[_0x479a7f][0x1][_0x3bd4('0xb')]/0x3e8;shortageResources[_0x479a7f][0x1][_0x3bd4('0xb')]=0x0;}if(shortageResources[_0x479a7f][0x1][_0x3bd4('0xb')]>merchantOrders[_0x10bf49][_0x3bd4('0xb')]*0x3e8){links[_0x3bd4('0x43')]({'source':merchantOrders[_0x10bf49][_0x3bd4('0x7d')],'target':villageID[_0x479a7f],'stone':merchantOrders[_0x10bf49][_0x3bd4('0xb')]*0x3e8});shortageResources[_0x479a7f][0x1][_0x3bd4('0xb')]-=merchantOrders[_0x10bf49][_0x3bd4('0xb')]*0x3e8;merchantOrders[_0x10bf49][_0x3bd4('0xb')]=0x0;}}if(shortageResources[_0x479a7f][0x1][_0x3bd4('0xb')]<=0x0){break;}if(_0x10bf49==merchantOrders[_0x3bd4('0x29')]-0x1&&shortageResources[_0x479a7f][0x1][_0x3bd4('0xb')]>0x0){console[_0x3bd4('0xb1')](_0x3bd4('0xb6'));_0x59dd93=0x0;break;}}if(_0x59dd93==0x0){_0x479a7f=0x0;break;}}}}for(var _0x479a7f=shortageResources[_0x3bd4('0x29')]-0x1;_0x479a7f>=0x0;_0x479a7f--){$(_0x3bd4('0x98'))['css'](_0x3bd4('0xad'),(shortageResources[_0x3bd4('0x29')]-_0x479a7f)/shortageResources[_0x3bd4('0x29')]*0x64+'%');for(var _0x1cd6bd=0x0;_0x1cd6bd<merchantOrders[_0x3bd4('0x29')];_0x1cd6bd++){merchantOrders[_0x1cd6bd][_0x3bd4('0xb9')]=checkDistance(merchantOrders[_0x1cd6bd]['x'],merchantOrders[_0x1cd6bd]['y'],villagesData[_0x479a7f][_0x3bd4('0x35')][_0x3bd4('0xb5')](/(\d+)\|(\d+)/)[0x1],villagesData[_0x479a7f][_0x3bd4('0x35')]['match'](/(\d+)\|(\d+)/)[0x2]);}merchantOrders['sort'](function(_0x2f3ad4,_0x4789e5){return _0x2f3ad4[_0x3bd4('0xb9')]-_0x4789e5[_0x3bd4('0xb9')];});if(shortageResources[_0x479a7f][0x2][_0x3bd4('0xf')]<=0x0){}else{while(shortageResources[_0x479a7f][0x2][_0x3bd4('0xf')]>0x0){var _0x1a8c3c=0x0;for(var _0x10bf49=0x0;_0x10bf49<merchantOrders['length'];_0x10bf49++){_0x1a8c3c+=merchantOrders[_0x10bf49][_0x3bd4('0xf')];if(merchantOrders[_0x10bf49][_0x3bd4('0xf')]>0x0){if(shortageResources[_0x479a7f][0x2][_0x3bd4('0xf')]<=merchantOrders[_0x10bf49][_0x3bd4('0xf')]*0x3e8){links['push']({'source':merchantOrders[_0x10bf49][_0x3bd4('0x7d')],'target':villageID[_0x479a7f],'iron':shortageResources[_0x479a7f][0x2][_0x3bd4('0xf')]});merchantOrders[_0x10bf49][_0x3bd4('0xf')]-=shortageResources[_0x479a7f][0x2][_0x3bd4('0xf')]/0x3e8;shortageResources[_0x479a7f][0x2][_0x3bd4('0xf')]=0x0;}if(shortageResources[_0x479a7f][0x2]['iron']>merchantOrders[_0x10bf49]['iron']*0x3e8){links['push']({'source':merchantOrders[_0x10bf49]['villageID'],'target':villageID[_0x479a7f],'iron':merchantOrders[_0x10bf49]['iron']*0x3e8});shortageResources[_0x479a7f][0x2][_0x3bd4('0xf')]-=merchantOrders[_0x10bf49][_0x3bd4('0xf')]*0x3e8;merchantOrders[_0x10bf49][_0x3bd4('0xf')]=0x0;}}if(shortageResources[_0x479a7f][0x2][_0x3bd4('0xf')]<=0x0){break;}if(_0x10bf49==merchantOrders[_0x3bd4('0x29')]-0x1&&shortageResources[_0x479a7f][0x2]['iron']>0x0){console[_0x3bd4('0xb1')]('Done\x20with\x20this\x20cycle');totalIronToTrade=0x0;break;}}if(_0x1a8c3c==0x0){_0x479a7f=0x0;break;}}}}$(_0x3bd4('0x98'))[_0x3bd4('0x45')]();htmlCode=_0x3bd4('0x4a')+langShinko[0x0]+_0x3bd4('0x9c')+langShinko[0x1]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22sophHeader\x22\x20width=\x2225%\x22\x20style=\x22text-align:center\x22>'+langShinko[0x2]+_0x3bd4('0x41')+langShinko[0x3]+_0x3bd4('0x74')+langShinko[0x4]+_0x3bd4('0x74')+langShinko[0x5]+_0x3bd4('0x74')+langShinko[0x6]+_0x3bd4('0x59')+langShinko[0x8]+_0x3bd4('0x5a')+totalsAndAverages+_0x3bd4('0x4b');$('#mobileHeader')['eq'](0x0)[_0x3bd4('0x91')](htmlCode);$('#content_value')['eq'](0x0)[_0x3bd4('0xaa')](htmlCode);createList();})[_0x3bd4('0xb4')](function(){console[_0x3bd4('0xb1')](_0x3bd4('0xcb'));})[_0x3bd4('0x1c')](function(){console[_0x3bd4('0xb1')](_0x3bd4('0x1f'));});});function createList(){console[_0x3bd4('0xb1')](_0x3bd4('0x32'));for(var _0x365312=0x0;_0x365312<links[_0x3bd4('0x29')];_0x365312++){if(links[_0x365312][_0x3bd4('0x85')]==undefined)links[_0x365312]['wood']=0x0;if(links[_0x365312][_0x3bd4('0xb')]==undefined)links[_0x365312][_0x3bd4('0xb')]=0x0;if(links[_0x365312][_0x3bd4('0xf')]==undefined)links[_0x365312]['iron']=0x0;}console[_0x3bd4('0xb1')](_0x3bd4('0xa0'));for(var _0x365312=0x0;_0x365312<links['length'];_0x365312++){for(var _0x250283=0x0;_0x250283<links[_0x3bd4('0x29')];_0x250283++){if(links[_0x365312][_0x3bd4('0x52')]==links[_0x250283][_0x3bd4('0x52')]&&links[_0x365312]['target']==links[_0x250283][_0x3bd4('0x15')]&&_0x365312!=_0x250283){links[_0x365312][_0x3bd4('0x85')]+=parseInt(links[_0x250283][_0x3bd4('0x85')]);links[_0x250283]['wood']=0x0;links[_0x365312][_0x3bd4('0xb')]+=parseInt(links[_0x250283][_0x3bd4('0xb')]);links[_0x250283][_0x3bd4('0xb')]=0x0;links[_0x365312][_0x3bd4('0xf')]+=parseInt(links[_0x250283][_0x3bd4('0xf')]);links[_0x250283][_0x3bd4('0xf')]=0x0;}}}console[_0x3bd4('0xb1')](_0x3bd4('0x61'));for(var _0x365312=0x0;_0x365312<links[_0x3bd4('0x29')];_0x365312++){if(links[_0x365312][_0x3bd4('0x85')]+links[_0x365312][_0x3bd4('0xb')]+links[_0x365312][_0x3bd4('0xf')]==0x0){delete links[_0x365312];}}console[_0x3bd4('0xb1')](_0x3bd4('0x54'));for(var _0x365312=0x0;_0x365312<Object[_0x3bd4('0x4f')](links)[_0x3bd4('0x29')];_0x365312++){cleanLinks['push'](links[Object[_0x3bd4('0x4f')](links)[_0x365312]]);}console[_0x3bd4('0xb1')]('pushed\x20to\x20clean\x20array');cleanLinks=addDistanceToArray(cleanLinks);listHTML='';cleanLinks[_0x3bd4('0x83')](function(_0x86955a,_0x26d36a){return _0x86955a[_0x3bd4('0xb9')]-_0x26d36a[_0x3bd4('0xb9')];});for(var _0x365312=0x0;_0x365312<cleanLinks[_0x3bd4('0x29')];_0x365312++){console[_0x3bd4('0xb1')](_0x3bd4('0x55')+_0x365312+'of\x20the\x20list');if(_0x365312%0x2==0x0){tempRow='\x20id=\x27'+_0x365312+_0x3bd4('0xc1');}else{tempRow=_0x3bd4('0xc2')+_0x365312+'\x27\x20class=\x27sophRowA\x27';}for(property in villagesData){if(villagesData[property]['id']==cleanLinks[_0x365312][_0x3bd4('0x52')]){sourceName=villagesData[property][_0x3bd4('0x35')];sourceURL=villagesData[property][_0x3bd4('0x1a')];}}for(property in villagesData){if(villagesData[property]['id']==cleanLinks[_0x365312][_0x3bd4('0x15')]){targetName=villagesData[property][_0x3bd4('0x35')];targetURL=villagesData[property][_0x3bd4('0x1a')];targetWood=villagesData[property]['wood'];targetStone=villagesData[property][_0x3bd4('0xb')];targetIron=villagesData[property][_0x3bd4('0xf')];targetCapacity=villagesData[property][_0x3bd4('0x12')];}}listHTML+=_0x3bd4('0xb3')+tempRow+'\x20height=\x2240\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><a\x20href=\x22'+sourceURL+_0x3bd4('0x17')+sourceName+'\x20</a></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x20<a\x20href=\x22'+targetURL+_0x3bd4('0x62')+targetWood+_0x3bd4('0x6b')+targetStone+_0x3bd4('0x97')+targetIron+_0x3bd4('0x30')+targetCapacity+'\x22>'+targetName+_0x3bd4('0x71')+cleanLinks[_0x365312][_0x3bd4('0xb9')]+_0x3bd4('0xd')+cleanLinks[_0x365312][_0x3bd4('0x85')]+_0x3bd4('0x77')+cleanLinks[_0x365312][_0x3bd4('0xb')]+_0x3bd4('0x20')+cleanLinks[_0x365312][_0x3bd4('0xf')]+'<span\x20class=\x22icon\x20header\x20iron\x22>\x20</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22text-align:center\x22><input\x20type=\x22button\x22\x20class=\x22btn\x20evt-confirm-btn\x20btn-confirm-yes\x22\x20id=\x22building\x22\x20value=\x22'+langShinko[0x7]+_0x3bd4('0xbe')+cleanLinks[_0x365312]['source']+','+cleanLinks[_0x365312][_0x3bd4('0x15')]+','+cleanLinks[_0x365312][_0x3bd4('0x85')]+','+cleanLinks[_0x365312][_0x3bd4('0xb')]+','+cleanLinks[_0x365312][_0x3bd4('0xf')]+','+_0x365312+_0x3bd4('0x36');}$(_0x3bd4('0x5'))['eq'](0x0)[_0x3bd4('0x91')](listHTML);$(_0x3bd4('0x10'))[0x0][_0x3bd4('0x8b')]();console[_0x3bd4('0xb1')]('Finished');}function checkDistance(_0x26cb1b,_0x31f86a,_0x21d7c4,_0x4ba19d){var _0x8c9d9b=_0x26cb1b-_0x21d7c4;var _0x2ed16c=_0x31f86a-_0x4ba19d;var _0xa31d6d=Math[_0x3bd4('0x6f')](Math[_0x3bd4('0x90')](_0x8c9d9b,_0x2ed16c));return _0xa31d6d;}function addDistanceToArray(_0x46903a){for(var _0x30533a=0x0;_0x30533a<_0x46903a[_0x3bd4('0x29')];_0x30533a++){for(property in villagesData){if(villagesData[property]['id']==_0x46903a[_0x30533a][_0x3bd4('0x52')]){sourceName=villagesData[property][_0x3bd4('0x35')];sourceURL=villagesData[property][_0x3bd4('0x1a')];}}for(property in villagesData){if(villagesData[property]['id']==_0x46903a[_0x30533a][_0x3bd4('0x15')]){targetName=villagesData[property]['name'];targetURL=villagesData[property][_0x3bd4('0x1a')];}}_0x46903a[_0x30533a][_0x3bd4('0xb9')]=checkDistance(sourceName[_0x3bd4('0xb5')](/(\d+)\|(\d+)/)[0x1],sourceName[_0x3bd4('0xb5')](/(\d+)\|(\d+)/)[0x2],targetName[_0x3bd4('0xb5')](/(\d+)\|(\d+)/)[0x1],targetName[_0x3bd4('0xb5')](/(\d+)\|(\d+)/)[0x2]);}return _0x46903a;}